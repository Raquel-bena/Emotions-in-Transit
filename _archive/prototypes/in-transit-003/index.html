<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMOTIONS (IN) TRANSIT - Data Webcam</title>
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Carga las bibliotecas locales -->
    <script src="libs/p5.min.js"></script>
    <script src="libs/ml5.min.js"></script>
</head>
<body>
    <div id="app-container">
        <!-- Barra superior -->
        <div class="top-bar">
            <span class="location">Barcelona</span>
            <span class="datetime" id="current-datetime"></span>
        </div>
        
        <!-- Visualización principal -->
        <div id="main-visualization">
            <!-- Capa de partículas -->
            <div class="particles-canvas" id="particles-canvas"></div>
            
            <!-- Visualización de datos -->
            <div class="data-sections">
                <!-- Sección 1: Clima -->
                <div class="data-section weather-section">
                    <div class="weather-visual">
                        <div class="temp-visual" id="temp-visual">
                            <div class="temp-indicator" id="temp-indicator"></div>
                        </div>
                    </div>
                    <div class="weather-data" id="weather-data">
                        <!-- Datos dinámicos -->
                    </div>
                </div>
                
                <!-- Sección 2: Ambiente -->
                <div class="data-section environment-section">
                    <div class="environment-visual">
                        <div class="noise-wave" id="noise-wave">
                            <svg class="wave-path" id="wave-path" viewBox="0 0 100% 100%" preserveAspectRatio="none">
                                <path id="noise-path" fill="none" stroke="rgba(255, 255, 255, 0.7)" stroke-width="2"></path>
                            </svg>
                        </div>
                    </div>
                    <div class="environment-data" id="environment-data">
                        <!-- Datos dinámicos -->
                    </div>
                </div>
                
                <!-- Sección 3: Transporte -->
                <div class="data-section transport-section">
                    <div class="transport-visual">
                        <div class="congestion-visual" id="congestion-visual">
                            <div class="congestion-indicator" id="congestion-indicator"></div>
                        </div>
                    </div>
                    <div class="transport-data" id="transport-data">
                        <!-- Datos dinámicos -->
                    </div>
                </div>
            </div>
            
            <!-- Superposición de cara -->
            <div class="face-overlay" id="face-overlay">
                <div class="ascii-face" id="ascii-face"></div>
            </div>
        </div>
        
        <!-- Pie de página -->
        <div class="footer">
            <h1>EMOTIONS</h1>
            <h1>(IN)</h1>
            <h1>TRANSIT</h1>
        </div>
        
        <!-- Pantalla de carga -->
        <div class="loading-screen" id="loading-screen">
            <div class="loading-content">
                <div class="spinner"></div>
                <p class="loading-status" id="loading-status">Cargando sistema...</p>
            </div>
        </div>
    </div>

    <!-- Variables globales -->
    <script>
        // Valores por defecto para evitar errores
        window.OWM_KEY = '09a95abe51374eae766a284a97a3f039';
        window.OWM_CITY_ID = 3128740;
        window.TMB_APP_ID = 'daf62db0';
        window.TMB_APP_KEY = '5e4adb21bdfeda65a91e36cc2c12b7df';
        window.SC_DEVICE_ID = 16559;
    </script>
    
    <!-- Configuración secreta -->
    <script src="config/secrets.js"></script>
    
    <!-- Lógica principal -->
    <script src="js/api.js"></script>
    <script src="js/app.js"></script>
    
    <script>
        function updateDateTime() {
            const now = new Date();
            document.getElementById('current-datetime').textContent = 
                `${now.toLocaleDateString()} ${now.toLocaleTimeString()}`;
        }
        
        setInterval(updateDateTime, 1000);
        updateDateTime();
        
        function updateLoadingStatus(message) {
            const statusElement = document.getElementById('loading-status');
            if (statusElement) {
                statusElement.textContent = message;
            }
        }
    </script>
</body>
</html>